{"version":3,"sources":["webpack:///./js/whyis_vue/components/vega-lite-wrapper.vue?ef16","webpack:///./js/whyis_vue/components/vega-lite-wrapper.vue?e6dc","webpack:///js/whyis_vue/components/vega-lite-wrapper.vue","webpack:///./js/whyis_vue/components/vega-lite-wrapper.vue","webpack:///./js/whyis_vue/utilities/debounce.js"],"names":["render","_h","this","$createElement","_c","_self","specValidation","valid","attrs","id","_v","_e","_withStripped","data","props","spec","type","Object","default","dataname","String","Array","onSpecChange","debounce","processSpec","methods","document","body","contains","$el","result","name","view","insert","resize","run","$emit","validation","console","debug","warn","validateSpec","plotSpec","watch","component","options","__file","func","millis","timeout","args","clearTimeout","setTimeout","apply"],"mappings":"iJAAA,IAAIA,EAAS,WACX,IACIC,EADMC,KACGC,eACTC,EAFMF,KAEGG,MAAMD,IAAMH,EACzB,OAAOG,EAAG,MAAO,CAHPF,KAIJI,eAAeC,MACfH,EAAG,MAAO,CAAEI,MAAO,CAAEC,GALjBP,KAKyBO,OACA,IANzBP,KAMAI,eAAeC,MACnBH,EAAG,IAAK,CAPJF,KAOSQ,GAAG,sCAPZR,KAQAS,QAIZX,EAAOY,eAAgB,E,yCCbgI,ECiBxI,CACbC,KAAK,KACI,CACLJ,GAAI,YACJH,eAAgB,KAGpBQ,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAAS,IAAM,MAEjBC,SAAU,CACRH,KAAMI,OACNF,QAAS,IAAM,MAEjBL,KAAM,CACJG,KAAMK,MACNH,QAAS,IAAM,OAGnB,UACEhB,KAAKoB,aAAe,OAAAC,EAAA,GAASrB,KAAKsB,YAAa,KAC/CtB,KAAKoB,gBAEPG,QAAS,CACP,iBAEE,IAAKC,SAASC,KAAKC,SAAS1B,KAAK2B,KAC/B,OAEF,MAAMC,QAAe,YAAM,IAAI5B,KAAKO,GAAMP,KAAKa,KAAM,IACrD,GAAIb,KAAKW,KAAM,CACb,MAAMkB,EAAO7B,KAAKiB,YAAcjB,KAAKa,MAAQ,IAAIF,MAAQ,IAAIkB,MAAQ,SACrED,EAAOE,KAAKC,OAAOF,EAAM7B,KAAKW,MAAMqB,SAASC,MAE/CjC,KAAKkC,MAAM,gBAAiBN,EAAOE,OAErC,eACE,MAAMK,EAAa,mBAAanC,KAAKa,KAAM,GACtCsB,EAAW9B,MAGd+B,QAAQC,MAAM,kBAAmBF,GAFjCC,QAAQE,KAAK,eAAgBH,GAI/BnC,KAAKI,eAAiB+B,GAExB,cACEnC,KAAKuC,eACDvC,KAAKI,eAAeC,OACtBL,KAAKwC,aAIXC,MAAO,CACL,OACEzC,KAAKoB,kB,OClEPsB,EAAY,YACd,EACA5C,EHGoB,IGDpB,EACA,KACA,KACA,MAuBF4C,EAAUC,QAAQC,OAAS,gDACZ,UAAAF,E,0CCrCA,SAASrB,EAAUwB,EAAMC,GACtC,IAAIC,EACJ,OAAO,YAAaC,GAElBC,aAAaF,GACbA,EAAUG,WAFW,IAAML,EAAKM,MAAMnD,KAAMgD,GAETF,I","file":"whyis_vue_bundle.5.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _vm.specValidation.valid\n      ? _c(\"div\", { attrs: { id: _vm.id } })\n      : _vm.specValidation.valid === false\n      ? _c(\"p\", [_vm._v(\"Invalid Vega-Lite specification.\")])\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vega-lite-wrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vega-lite-wrapper.vue?vue&type=script&lang=js&\"","<template>\n  <div>\n    <div v-if=\"specValidation.valid\" v-bind:id=\"id\"></div>\n    <p v-else-if=\"specValidation.valid === false\">Invalid Vega-Lite specification.</p>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport vegaLiteSchema from 'vega-lite/build/vega-lite-schema.json'\nimport embed from 'vega-embed'\n\nimport debounce from 'utilities/debounce'\n\nimport { validate as jsonValidate } from 'jsonschema'\n\n\nexport default {\n  data () {\n    return {\n      id: 'vega-lite',\n      specValidation: {}\n    }\n  },\n  props: {\n    spec: {\n      type: Object,\n      default: () => null\n    },\n    dataname: {\n      type: String,\n      default: () => null\n    },\n    data: {\n      type: Array,\n      default: () => null\n    },\n  },\n  created ()  {\n    this.onSpecChange = debounce(this.processSpec, 300)\n    this.onSpecChange()\n  },\n  methods: {\n    async plotSpec () {\n      // Cancel plotting if the component's element no longer exists in dom\n      if (!document.body.contains(this.$el)) {\n        return\n      }\n      const result = await embed(`#${this.id}`, this.spec, {})\n      if (this.data) {\n        const name = this.dataname || ((this.spec || {}).data || {}).name || 'source'\n        result.view.insert(name, this.data).resize().run()\n      }\n      this.$emit('new-vega-view', result.view)\n    },\n    validateSpec () {\n      const validation = jsonValidate(this.spec, vegaLiteSchema)\n      if (!validation.valid) {\n        console.warn('Invalid spec', validation)\n      } else {\n        console.debug('spec checks out', validation)\n      }\n      this.specValidation = validation\n    },\n    processSpec () {\n      this.validateSpec()\n      if (this.specValidation.valid) {\n        this.plotSpec()\n      }\n    }\n  },\n  watch: {\n    spec () {\n      this.onSpecChange()\n    }\n  }\n}\n\nexport { vegaLiteSchema }\n\n</script>\n","import { render, staticRenderFns } from \"./vega-lite-wrapper.vue?vue&type=template&id=defc7986&\"\nimport script from \"./vega-lite-wrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./vega-lite-wrapper.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/jamie/src/whyis/whyis/static/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('defc7986')) {\n      api.createRecord('defc7986', component.options)\n    } else {\n      api.reload('defc7986', component.options)\n    }\n    module.hot.accept(\"./vega-lite-wrapper.vue?vue&type=template&id=defc7986&\", function () {\n      api.rerender('defc7986', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"js/whyis_vue/components/vega-lite-wrapper.vue\"\nexport default component.exports","\nexport default function debounce (func, millis) {\n  let timeout\n  return function (...args) {\n    const functionCall = () => func.apply(this, args)\n    clearTimeout(timeout)\n    timeout = setTimeout(functionCall, millis)\n  }\n}\n"],"sourceRoot":""}