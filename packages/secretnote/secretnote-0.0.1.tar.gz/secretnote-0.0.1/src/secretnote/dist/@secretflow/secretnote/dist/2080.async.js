"use strict";(self.webpackChunk_secretflow_secretnote=self.webpackChunk_secretflow_secretnote||[]).push([[2080],{52080:function(fr,Fe,e){e.d(Fe,{Q:function(){return Vr},q:function(){return xr}});var re=e(58601),le=e(84880),k=e(53353),ve=e(20904),b=e(86038),Se=e(4977),Q=e.n(Se),we=e(78796),z=e.n(we),Ce=e(10154),P=e.n(Ce),Pe=e(20008),M=e(47302),X=e(58757),te=e(95881),q=M.J3.defineToken("FilePreviewContribution"),o=e(35667),ue,oe,Ie=function(t){var r=(0,X.useRef)(null),i=(0,X.useRef)();return(0,X.useEffect)(function(){if(t.data&&r.current){var n=(0,te.bW)(t.data||""),s=[];n.length>0&&(s=Object.keys(n[0]));var p=r.current.offsetWidth,c=r.current.offsetHeight,d={width:p,height:c,showSeriesNumber:!0},u={fields:{columns:s},data:n};i.current=new Pe.HZt(r.current,u,d),i.current.setThemeCfg({theme:{rowCell:{text:{textAlign:"center"}},dataCell:{text:{textAlign:"center"}}},name:"colorful",palette:{semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColors:["#FFFFFF","#F4F4F5","#DEDFE0","#24292E","#1F2327","#1F2327","#1F2327","#24292E","#FFFFFF","#DEDFE0","#45494D","#45494D","#24292E","#000000","#000000"]}}),i.current.render()}return function(){i.current&&i.current.destroy()}},[t.data]),(0,o.jsx)("div",{ref:r,style:{width:"100%",height:"100%"}})},ie=(ue=(0,M.ri)({contrib:[q]}),ue(oe=Q()(function g(){z()(this,g),P()(this,"type","csv"),P()(this,"render",function(t){return(0,o.jsx)(Ie,{data:t})})}))||oe),de=e(41553),N=e.n(de),ce=e(49488),V=e.n(ce),Ue=e(84047),Y=e.n(Ue),B=e(38168),fe=e(91798),ne=e(99138),U=e(64495),he=e(84743),G=e(20376),pe=e(42356),ge=e(45332),O=e.n(ge),se=e(90819),m=e.n(se),ye=e(86222),je=e.n(ye),I=e(89933),y=e.n(I),D=e(26336),T=e.n(D),E=e(62055),f=e.n(E),j=e(23202),w,R,v,C,ae,h,ze,x,Te,Re,Ee="/",$e=[".csv",".log",".txt",".jsonl"],A=(w=(0,M.ri)(),R=function(t,r){return(0,M.f3)(re.QY6)(t,void 0,0)},v=function(t,r){return(0,M.f3)(b.CP)(t,void 0,1)},C=Reflect.metadata("design:type",Function),ae=Reflect.metadata("design:paramtypes",[typeof re.QY6=="undefined"?Object:re.QY6,typeof b.CP=="undefined"?Object:b.CP]),h=(0,B.vg)(),ze=Reflect.metadata("design:type",Array),w(x=R(x=v(x=C(x=ae(x=(Te=function(){function g(t,r){z()(this,g),P()(this,"contentsManager",void 0),P()(this,"serverManager",void 0),T()(this,"fileTree",Re,this),this.contentsManager=t,this.serverManager=r,this.serverManager.onServerAdded(this.onServerChanged.bind(this)),this.serverManager.onServerDeleted(this.onServerChanged.bind(this))}return Q()(g,[{key:"getFileTree",value:function(){var t=y()(m()().mark(function i(){var n=this,s,p,c,d,u;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.serverManager.getServerList();case 2:s=l.sent.filter(function(F){return F.status==="running"}),p=[],c=je()(s),l.prev=5,u=m()().mark(function F(){var L,S,K,Ne,J,De;return m()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return L=d.value,S={title:L.name,key:L.id,children:[]},$.prev=2,$.next=5,n.contentsManager.get(Ee,{baseUrl:n.serverManager.getServerUrl(L).baseUrl,content:!0});case 5:K=$.sent,Ne=K.content.filter(function(_){return n.isFileVisible(_.path)}),J=Ne.map(function(_){return{title:_.name,key:n.formatNodeKey(L.id,_.path),isLeaf:!0}}),De=J.sort(function(_,ee){return _.title.localeCompare(ee.title)}),S.children=De,p.push(S),$.next=16;break;case 13:$.prev=13,$.t0=$.catch(2),console.log($.t0);case 16:case"end":return $.stop()}},F,null,[[2,13]])}),c.s();case 8:if((d=c.n()).done){l.next=12;break}return l.delegateYield(u(),"t0",10);case 10:l.next=8;break;case 12:l.next=17;break;case 14:l.prev=14,l.t1=l.catch(5),c.e(l.t1);case 17:return l.prev=17,c.f(),l.finish(17);case 20:return this.fileTree=p,l.abrupt("return",p);case 22:case"end":return l.stop()}},i,this,[[5,14,17,20]])}));function r(){return t.apply(this,arguments)}return r}()},{key:"isFileExist",value:function(){var t=y()(m()().mark(function i(n,s){var p,c,d;return m()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return p=n.key,a.next=3,this.serverManager.getServerDetail(p);case 3:if(c=a.sent,c){a.next=6;break}return a.abrupt("return",!1);case 6:return a.next=8,this.contentsManager.get(Ee,{baseUrl:this.serverManager.getServerUrl(c).baseUrl,content:!0});case 8:return d=a.sent,a.abrupt("return",d.content.some(function(l){return l.name===s}));case 10:case"end":return a.stop()}},i,this)}));function r(i,n){return t.apply(this,arguments)}return r}()},{key:"uploadFile",value:function(){var t=y()(m()().mark(function i(n,s,p){var c,d,u,a;return m()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return c=n.key,F.next=3,this.serverManager.getServerDetail(c);case 3:if(d=F.sent,!d){F.next=9;break}return u=this.serverManager.getServerUrl(d).baseUrl,a="".concat(Ee,"/").concat(s),F.next=9,this.contentsManager.save(a,{content:p,baseUrl:u,name:s,path:a,type:"file",format:"text"});case 9:case"end":return F.stop()}},i,this)}));function r(i,n,s){return t.apply(this,arguments)}return r}()},{key:"downloadFile",value:function(){var t=y()(m()().mark(function i(n){var s,p,c,d,u;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=this.parseNodeKey(n.key),p=s.serverId,c=s.path,l.next=3,this.serverManager.getServerDetail(p);case 3:if(d=l.sent,!d){l.next=9;break}return l.next=7,this.contentsManager.getDownloadUrl(c,{baseUrl:this.serverManager.getServerUrl(d).baseUrl});case 7:u=l.sent,(0,te.$A)(u,n.title);case 9:case"end":return l.stop()}},i,this)}));function r(i){return t.apply(this,arguments)}return r}()},{key:"deleteFile",value:function(){var t=y()(m()().mark(function i(n){var s,p,c,d;return m()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.isLeaf){a.next=2;break}return a.abrupt("return");case 2:return s=this.parseNodeKey(n.key),p=s.serverId,c=s.path,a.next=5,this.serverManager.getServerDetail(p);case 5:if(d=a.sent,!d){a.next=11;break}return a.next=9,this.contentsManager.delete(c,{baseUrl:this.serverManager.getServerUrl(d).baseUrl});case 9:return a.next=11,this.getFileTree();case 11:case"end":return a.stop()}},i,this)}));function r(i){return t.apply(this,arguments)}return r}()},{key:"getFileContent",value:function(){var t=y()(m()().mark(function i(n,s){var p,c,d;return m()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return p=decodeURIComponent(s),a.next=3,this.serverManager.getServerDetail(n);case 3:if(c=a.sent,!c){a.next=9;break}return a.next=7,this.contentsManager.get(p,{baseUrl:this.serverManager.getServerUrl(c).baseUrl,content:!0});case 7:return d=a.sent,a.abrupt("return",d);case 9:case"end":return a.stop()}},i,this)}));function r(i,n){return t.apply(this,arguments)}return r}()},{key:"viewFile",value:function(r){var i=this.parseNodeKey(r.key),n=i.serverId,s=i.path,p=encodeURIComponent(s);window.open("/secretnote/preview?serverId=".concat(n,"&path=").concat(p),"_blank")}},{key:"copyPath",value:function(r){var i=this.parseNodeKey(r.key),n=i.path;navigator.clipboard.writeText(n)}},{key:"getFileExt",value:function(r){var i=this.parseNodeKey(r.key),n=i.path,s=this.getFileExtByPath(n);return s}},{key:"getFileExtByPath",value:function(r){var i=r.split(".").pop();return i}},{key:"formatNodeKey",value:function(r,i){return"".concat(r,"|").concat(i)}},{key:"parseNodeKey",value:function(r){var i=r.split("|"),n=O()(i,2),s=n[0],p=n[1];return{serverId:s,path:p}}},{key:"isFileVisible",value:function(r){var i=this.getFileExtByPath(r);return $e.includes(".".concat(i))}},{key:"onServerChanged",value:function(){this.getFileTree()}}]),g}(),Re=f()(Te.prototype,"fileTree",[h,ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te))||x)||x)||x)||x)||x),Ze,Le,ke,Oe,Ae,W,hr=function(){var t=(0,B.oC)(fe.yd);return(0,o.jsx)(he.Z,{title:U.U6.t("\u5237\u65B0"),children:(0,o.jsx)(pe.Z,{size:14,onClick:function(i){i.stopPropagation(),t.fileService.getFileTree(),G.ZP.success(U.U6.t("\u6587\u4EF6\u5217\u8868\u5DF2\u5237\u65B0"))}})})},Ke=(Ze=(0,M.ri)(),Le=(0,k.ei)("file-extra-view"),ke=function(t,r){return(0,M.f3)(A)(t,void 0,0)},Oe=Reflect.metadata("design:type",Function),Ae=Reflect.metadata("design:paramtypes",[typeof A=="undefined"?Object:A]),Ze(W=Le(W=ke(W=Oe(W=Ae(W=function(g){V()(r,g);var t=Y()(r);function r(i){var n;return z()(this,r),n=t.call(this),P()(N()(n),"fileService",void 0),P()(N()(n),"view",hr),n.fileService=i,n}return Q()(r)}(ne.P))||W)||W)||W)||W)||W),pr=e(51598),gr=e.n(pr),yr=e(94829),mr=e(96530),Wr=e(62394),Ve,xe,We,Fr=mr.ZP.pre(Ve||(Ve=gr()([`
  width: 100%;
  height: 100%;
  overflow: scroll;
  margin: 0;

  .line-number {
    float: left;
    text-align: right;
    margin-right: 12px;
    color: #bfbfbf;
    user-select: none;
  }

  code {
    padding: 0 1em !important;
  }
`]))),Sr=function(t){(0,X.useEffect)(function(){yr.Z.highlightAll()},[]);var r=t.data.trim().split(`
`).map(function(i,n){return"".concat(n+1,`
`)}).join("");return(0,o.jsxs)(Fr,{children:[(0,o.jsx)("span",{className:"line-number",children:r}),(0,o.jsx)("code",{className:"language-json",children:t.data})]})},wr=(xe=(0,M.ri)({contrib:[q]}),xe(We=Q()(function g(){z()(this,g),P()(this,"type","jsonl"),P()(this,"render",function(t){return(0,o.jsx)(Sr,{data:t})})}))||We),He,Qe,Cr=X.lazy(function(){return Promise.all([e.e(7033),e.e(6748)]).then(e.bind(e,26529))}),Pr=(He=(0,M.ri)({contrib:[q]}),He(Qe=Q()(function g(){z()(this,g),P()(this,"type","log"),P()(this,"render",function(t){return(0,o.jsx)(Cr,{code:[t]})})}))||Qe),Ye,Be,Je,Ge,Xe,qe,_e,er,Z,me,rr,tr,Ur=function(){var t=(0,B.oC)(fe.yd),r=t.type,i=t.data,n=t.providers.getContributions(),s=n.find(function(c){return c.type===r}),p=s?s.render(i):(0,o.jsx)("div",{className:"data-preview",children:i});return p},nr=(Ye=(0,M.ri)(),Be=(0,k.ei)("file-preview-view"),Je=function(t,r){return(0,M.f3)(A)(t,void 0,0)},Ge=function(t,r){return(0,M.el)(q)(t,void 0,1)},Xe=Reflect.metadata("design:type",Function),qe=Reflect.metadata("design:paramtypes",[typeof A=="undefined"?Object:A,typeof M.Ll.Provider=="undefined"?Object:M.Ll.Provider]),_e=(0,B.vg)(),er=(0,B.vg)(),Ye(Z=Be(Z=Je(Z=Ge(Z=Xe(Z=qe(Z=(me=function(g){V()(r,g);var t=Y()(r);function r(i,n){var s;return z()(this,r),s=t.call(this),P()(N()(s),"view",Ur),P()(N()(s),"fileService",void 0),P()(N()(s),"providers",void 0),T()(N()(s),"data",rr,N()(s)),T()(N()(s),"type",tr,N()(s)),s.fileService=i,s.providers=n,s}return Q()(r,[{key:"onViewMount",value:function(){var i=y()(m()().mark(function s(){var p,c,d,u,a;return m()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(p=(0,te.Qw)("serverId","path"),c=O()(p,2),d=c[0],u=c[1],!(d&&u)){F.next=6;break}return F.next=4,this.fileService.getFileContent(d,u);case 4:a=F.sent,a&&(this.data=a.content,this.type=this.fileService.getFileExtByPath(u)||"txt");case 6:case"end":return F.stop()}},s,this)}));function n(){return i.apply(this,arguments)}return n}()}]),r}(ne.P),rr=f()(me.prototype,"data",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tr=f()(me.prototype,"type",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),me))||Z)||Z)||Z)||Z)||Z)||Z),jr=e(73193),ar=e.n(jr),Tr=e(42151),ir=e(8328),Er=e(52882),Mr=e(44549),br=e(90600),Nr=e(9713),Dr=e(52969),Ir=e(5792),zr=e(52396),Rr=e(38627),$r=e(75969),Zr=e(82146),Lr=e(80808),kr=e(68625),Or=e(16108),sr,lr,vr,ur,or,H,Ar=Tr.Z.DirectoryTree,Me={csv:(0,o.jsx)(br.Z,{size:16}),log:(0,o.jsx)(Nr.Z,{size:16}),txt:(0,o.jsx)(Dr.Z,{size:16}),default:(0,o.jsx)(Ir.Z,{size:16})},Kr=function(){var t=(0,B.oC)(fe.yd),r=t.fileService,i=function(u,a){switch(u){case"copy":r.copyPath(a),G.ZP.success(U.U6.t("\u8DEF\u5F84\u5DF2\u7ECF\u590D\u5236\u5230\u526A\u5207\u677F"));break;case"delete":ir.Z.confirm({title:U.U6.t("\u5220\u9664\u6587\u4EF6"),centered:!0,content:U.U6.t("\u6587\u4EF6 {name} \u5C06\u88AB\u5220\u9664",{name:a.title}),okText:U.U6.t("\u5220\u9664\u6587\u4EF6"),cancelText:U.U6.t("\u53D6\u6D88"),okType:"danger",onOk:function(F){return y()(m()().mark(function L(){return m()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,r.deleteFile(a);case 2:return G.ZP.success(U.U6.t("\u6587\u4EF6\u5DF2\u7ECF\u5220\u9664")),K.abrupt("return",F(Promise.resolve));case 4:case"end":return K.stop()}},L)}))()}});break;case"download":r.downloadFile(a);break;case"view":r.viewFile(a);break;default:break}},n=function(){var d=y()(m()().mark(function u(a,l){var F;return m()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,te.pJ)(l);case 2:return F=S.sent,S.prev=3,S.next=6,r.uploadFile(a,l.name,F);case 6:return S.next=8,r.getFileTree();case 8:G.ZP.success(U.U6.t("\u6587\u4EF6\u4E0A\u4F20\u6210\u529F")),S.next=14;break;case 11:S.prev=11,S.t0=S.catch(3),S.t0 instanceof Error&&G.ZP.error(S.t0.message);case 14:case"end":return S.stop()}},u,null,[[3,11]])}));return function(a,l){return d.apply(this,arguments)}}(),s=function(u){var a={accept:$e.join(","),beforeUpload:function(){var l=y()(m()().mark(function L(S){var K;return m()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,r.isFileExist(u,S.name);case 2:return K=J.sent,K?ir.Z.confirm({title:U.U6.t("\u4E0A\u4F20\u6587\u4EF6"),centered:!0,content:U.U6.t("\u6587\u4EF6 {name} \u5DF2\u7ECF\u5B58\u5728\uFF0C\u662F\u5426\u8986\u76D6\uFF1F",{name:S.name}),okText:"Overwrite",cancelText:U.U6.t("\u53D6\u6D88"),okType:"danger",onOk:function(cr){return y()(m()().mark(function $(){return m()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,n(u,S);case 2:return ee.abrupt("return",cr(Promise.resolve));case 3:case"end":return ee.stop()}},$)}))()}}):n(u,S),J.abrupt("return",!1);case 5:case"end":return J.stop()}},L)}));function F(L){return l.apply(this,arguments)}return F}(),fileList:[]};return(0,o.jsx)(Er.Z,ar()(ar()({},a),{},{children:U.U6.t("\u4E0A\u4F20\u5230\u6587\u4EF6\u5939")}))},p=function(u){var a=u.isLeaf;if(a){var l=r.getFileExt(u);return l&&l in Me?Me[l]:Me.default}return null},c=function(u){var a=u.isLeaf,l=[{key:"upload",label:s(u),icon:(0,o.jsx)(zr.Z,{size:12})}],F=[{key:"view",label:U.U6.t("\u67E5\u770B"),icon:(0,o.jsx)(Rr.Z,{size:12})},{key:"copy",label:U.U6.t("\u590D\u5236\u8DEF\u5F84\u5230\u526A\u5207\u677F"),icon:(0,o.jsx)($r.Z,{size:12})},{key:"download",label:U.U6.t("\u4E0B\u8F7D"),icon:(0,o.jsx)(Zr.Z,{size:12})},{type:"divider"},{key:"delete",label:U.U6.t("\u5220\u9664"),icon:(0,o.jsx)(Lr.Z,{size:12}),danger:!0}];return(0,o.jsxs)("div",{className:"ant-tree-title-content",children:[(0,o.jsx)("span",{children:(0,o.jsxs)(Mr.Z,{children:[p(u),(0,o.jsx)("span",{children:u.title})]})}),(0,o.jsx)(Or.h,{items:a?F:l,onClick:function(S){i(S,u)}})]})};return(0,o.jsx)(Ar,{blockNode:!0,onSelect:function(){},treeData:r.fileTree,className:"secretnote-file-tree",switcherIcon:(0,o.jsx)(kr.Z,{size:12}),icon:null,titleRender:c})},be="file",dr=(sr=(0,M.ri)({contrib:[ve.cI]}),lr=(0,k.ei)("secretnote-file-view"),vr=function(t,r){return(0,M.f3)(A)(t,void 0,0)},ur=Reflect.metadata("design:type",Function),or=Reflect.metadata("design:paramtypes",[typeof A=="undefined"?Object:A]),sr(H=lr(H=vr(H=ur(H=or(H=function(g){V()(r,g);var t=Y()(r);function r(i){var n;return z()(this,r),n=t.call(this),P()(N()(n),"fileService",void 0),P()(N()(n),"key",be),P()(N()(n),"label",U.U6.t("\u6587\u4EF6")),P()(N()(n),"order",2),P()(N()(n),"defaultOpen",!0),P()(N()(n),"view",Kr),n.fileService=i,n.fileService.getFileTree(),n}return Q()(r)}(ne.P))||H)||H)||H)||H)||H),Vr=le.R.create().register(A,dr,Ke,(0,k.bQ)({slot:be,view:dr,autoCreate:!0}),(0,k.bQ)({slot:"".concat(be,"Extra"),view:Ke,autoCreate:!0})),xr=le.R.create().contribution(q).register(A,nr,ie,Pr,wr,(0,k.bQ)({slot:ve.fD.main,view:nr,autoCreate:!0})).dependOn(re.MDs,b.aB)},86038:function(fr,Fe,e){e.d(Fe,{CP:function(){return ye},aB:function(){return je},U$:function(){return Y}});var re=e(84880),le=e(73193),k=e.n(le),ve=e(90819),b=e.n(ve),Se=e(86222),Q=e.n(Se),we=e(89933),z=e.n(we),Ce=e(26336),P=e.n(Ce),Pe=e(78796),M=e.n(Pe),X=e(4977),te=e.n(X),q=e(10154),o=e.n(q),ue=e(62055),oe=e.n(ue),Ie=e(23202),ie=e(58601),de=e(47302),N=e(38168),ce=e(79239),V=e(95881),Ue=e(64495),Y=function(I){return I.closed="closed",I.running="running",I.error="error",I}({}),B=function(I){return I.common="common",I}({}),fe=o()({},B.common,Ue.U6.t("\u901A\u7528")),ne,U,he,G,pe,ge,O,se,m,ye=(ne=(0,de.ri)(),U=function(y,D){return(0,de.f3)(ie.Ner)(y,void 0,0)},he=Reflect.metadata("design:type",Function),G=Reflect.metadata("design:paramtypes",[typeof ie.Ner=="undefined"?Object:ie.Ner]),pe=(0,N.vg)(),ge=Reflect.metadata("design:type",Array),ne(O=U(O=he(O=G(O=(se=function(){function I(y){M()(this,I),P()(this,"servers",m,this),o()(this,"serverConnection",void 0),o()(this,"onServerAddedEmitter",new ce.Q5),o()(this,"onServerAdded",this.onServerAddedEmitter.event),o()(this,"onServerDeletedEmitter",new ce.Q5),o()(this,"onServerDeleted",this.onServerDeletedEmitter.event),this.serverConnection=y,this.getServerList()}return te()(I,[{key:"getServerList",value:function(){var y=z()(b()().mark(function T(){var E,f,j,w,R,v,C;return b()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return E="api/nodes",f={method:"GET"},h.next=4,(0,V.WY)(E,f);case 4:j=h.sent,w=Q()(j),h.prev=6,w.s();case 8:if((R=w.n()).done){h.next=17;break}return v=R.value,v.id=v.id.toString(),h.next=13,this.getServerSpec(v);case 13:C=h.sent,C?(v.status=Y.running,v.kernelspec=C):v.status=Y.error;case 15:h.next=8;break;case 17:h.next=22;break;case 19:h.prev=19,h.t0=h.catch(6),w.e(h.t0);case 22:return h.prev=22,w.f(),h.finish(22);case 25:return this.servers=j,h.abrupt("return",j);case 27:case"end":return h.stop()}},T,this,[[6,19,22,25]])}));function D(){return y.apply(this,arguments)}return D}()},{key:"addServer",value:function(){var y=z()(b()().mark(function T(E){var f,j,w,R,v,C;return b()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return f={name:E.name||"Someone",address:E.address||"",type:E.type||B.common,status:Y.closed,kernelspec:void 0},h.next=3,this.getServerSpec(f);case 3:if(j=h.sent,!j){h.next=18;break}return w="api/nodes",R={method:"POST",body:JSON.stringify({name:f.name,address:f.address,type:f.type})},h.next=9,(0,V.WY)(w,R);case 9:return v=h.sent,f.status=Y.running,f.kernelspec=j,C=k()(k()({},f),{},{id:v.id}),this.servers.push(C),this.onServerAddedEmitter.fire(C),h.abrupt("return",C);case 18:throw new Error("Cannot connect to the node.");case 19:case"end":return h.stop()}},T,this)}));function D(T){return y.apply(this,arguments)}return D}()},{key:"deleteServer",value:function(){var y=z()(b()().mark(function T(E){var f,j,w,R;return b()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(f=this.servers.findIndex(function(ae){return ae.id===E}),f!==-1){C.next=3;break}return C.abrupt("return");case 3:return j="api/nodes/"+E,w={method:"DELETE"},C.next=7,(0,V.WY)(j,w);case 7:R=this.servers[f],this.servers.splice(f,1),this.onServerAddedEmitter.fire(R);case 10:case"end":return C.stop()}},T,this)}));function D(T){return y.apply(this,arguments)}return D}()},{key:"updateServer",value:function(){var y=z()(b()().mark(function T(E,f){var j,w;return b()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return j="api/nodes/"+E,w={method:"PATCH",body:JSON.stringify({name:f.name,address:f.address,type:f.type})},v.next=4,(0,V.WY)(j,w);case 4:this.servers=this.servers.map(function(C){return C.id===E?k()(k()({},C),f):C});case 5:case"end":return v.stop()}},T,this)}));function D(T,E){return y.apply(this,arguments)}return D}()},{key:"getServerDetail",value:function(){var y=z()(b()().mark(function T(E){var f,j,w;return b()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f="api/nodes/"+E,j={method:"GET"},v.next=4,(0,V.WY)(f,j);case 4:return w=v.sent,v.abrupt("return",w);case 6:case"end":return v.stop()}},T)}));function D(T){return y.apply(this,arguments)}return D}()},{key:"getServerSpec",value:function(){var y=z()(b()().mark(function T(E){var f,j,w;return b()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f="api/kernelspecs",v.prev=1,j=this.getServerUrl(E).baseUrl,v.next=5,(0,V.WY)(f,{},j);case 5:return w=v.sent,v.abrupt("return",w);case 9:v.prev=9,v.t0=v.catch(1),console.log(v.t0);case 12:case"end":return v.stop()}},T,this,[[1,9]])}));function D(T){return y.apply(this,arguments)}return D}()},{key:"getServerUrl",value:function(D){return{baseUrl:"http://".concat(D.address,"/"),wsUrl:"ws://".concat(D.address,"/")}}}]),I}(),m=oe()(se.prototype,"servers",[pe,ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),se))||O)||O)||O)||O),je=re.R.create().register(ye)}}]);
