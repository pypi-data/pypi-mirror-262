(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{84288:function(e,t,r){"use strict";var i=r(2265),n=r(88046);let l=(0,n.A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM6.5 10.5H17.5C18.3284 10.5 19 11.1716 19 12C19 12.8284 18.3284 13.5 17.5 13.5H6.5C5.67157 13.5 5 12.8284 5 12C5 11.1716 5.67157 10.5 6.5 10.5Z",fill:"currentColor"}))},"minus_circle");t.Z=l},43402:function(e,t,r){"use strict";var i=r(2265),n=r(88046);let l=(0,n.A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM18.9988 11.8778C19.0132 12.7061 18.3535 13.3893 17.5252 13.4038L13.5258 13.4736L13.5956 17.473C13.61 18.3013 12.9503 18.9845 12.122 18.9989C11.2937 19.0134 10.6105 18.3537 10.596 17.5254L10.5262 13.526L6.52684 13.5958C5.69854 13.6102 5.01535 12.9505 5.00089 12.1222C4.98644 11.2939 5.64619 10.6107 6.47449 10.5962L10.4739 10.5264L10.4041 6.52703C10.3896 5.69873 11.0494 5.01553 11.8777 5.00108C12.706 4.98662 13.3892 5.64637 13.4036 6.47467L13.4734 10.4741L17.4728 10.4043C18.3011 10.3898 18.9843 11.0495 18.9988 11.8778Z",fill:"currentColor"}))},"plus_circle");t.Z=l},16869:function(e,t,r){"use strict";async function i(e,t){let{arg:r}=t;console.log(JSON.stringify(r));let i=await fetch(""+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!(i.status>=200&&i.status<300))throw Error(await i.text());let n=await i.json();if(!i.ok)throw Error(n.message);return n}r.d(t,{_i:function(){return n},gz:function(){return s},hw:function(){return a},sj:function(){return l},wG:function(){return i}});let n=async function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let i=await fetch(""+t[0],t[1]);if(!i.ok)throw Error(await i.text());return i.json()},l=async(e,t)=>{let r=await fetch(""+e,t);if(!r.ok)throw Error(await r.text());return r};async function a(e,t){let{arg:r}=t,i=await fetch("".concat("").concat(e,"/").concat(r),{method:"DELETE"});if(!i.ok)throw Error(await i.text());return i}async function s(e,t){let{arg:r}=t,i=await fetch("".concat("").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw Error(await i.text());return i}},65746:function(e,t,r){"use strict";r.d(t,{Bf:function(){return s},JB:function(){return o},ZP:function(){return a}});var i=r(30713),n=r(16869),l=r(2265);function a(){let{data:e,error:t,isLoading:r}=(0,i.ZP)("/v1/streamers",n._i);return{isLoading:r,streamers:e}}function s(){let{data:e,error:t,isLoading:r}=(0,i.ZP)("/v1/users",n._i),[a,s]=(0,l.useState)([]);return(0,l.useEffect)(()=>{if(!e||0===e.length)return;let t=async e=>{try{let t=await (0,n._i)("/bili/space/myinfo?user=".concat(e.value),void 0),r=await (0,n.sj)("/bili/proxy?url=".concat(t.data.face)),i=await r.blob();return{...e,name:t.data.name,face:URL.createObjectURL(i)}}catch(i){console.error(i);let t=await (0,n.sj)("/bili/proxy?url=https://i0.hdslb.com/bfs/face/member/noface.jpg"),r=await t.blob();return{...e,name:"Cookie已失效",face:URL.createObjectURL(r)}}};Promise.all(e.map(t)).then(s)},[e]),{isLoading:r,isError:t,biliUsers:a}}function o(){var e;let{data:t,error:r,isLoading:l}=(0,i.ZP)("/bili/archive/pre",n._i),a=null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.typelist.map(e=>({label:e.name,value:e.id,children:e.children}));return{isLoading:l,isError:r,typeTree:a}}},66310:function(e,t,r){"use strict";r.d(t,{cE:function(){return l},f:function(){return i},ql:function(){return n}});let i={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},n=(e,t)=>{let{match:r,unmatch:i,callInInit:n=!0}=t;{let t=window.matchMedia(e),l=function(e){e.matches?r&&r(e):i&&i(e)};return(n&&l(t),Object.prototype.hasOwnProperty.call(t,"addEventListener"))?(t.addEventListener("change",l),()=>t.removeEventListener("change",l)):(t.addListener(l),()=>t.removeListener(l))}},l=e=>new Date(1e3*e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll("/","-")},86854:function(e,t,r){"use strict";var i=r(57437),n=r(2265),l=r(43402),a=r(84288),s=r(39528),o=r(98857),c=r(32081),u=r(65746);t.Z=e=>{let{formState:t,formApi:r,values:d}=e,{Section:h,Input:f,DatePicker:p,TimePicker:x,Select:m,Switch:w,InputNumber:g,Checkbox:y,CheckboxGroup:j,RadioGroup:b,Radio:v,Cascader:C,TagInput:E,TextArea:_}=c.Form,{Text}=c.Typography,{typeTree:L,isError:k,isLoading:S}=(0,u.JB)(),O=null==L?void 0:L.map(e=>({...e,children:e.children.map(e=>({label:(0,i.jsxs)(i.Fragment,{children:[e.name," ",(0,i.jsx)(Text,{type:"quaternary",size:"small",children:e.desc})]}),value:e.id}))})),Z=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{field:"sound",options:[{label:"杜比音效",value:"dolby"},{label:"Hi-Res无损音质",value:"hires"}],direction:"horizontal",label:"音效设置"}),(0,i.jsx)(j,{field:"interaction",options:[{label:"关闭弹幕",value:"up_close_danmu"},{label:"关闭评论",value:"up_close_reply"},{label:"开启精选评论",value:"up_selection_reply"}],direction:"horizontal",label:"互动设置"}),(0,i.jsx)(f,{field:"dynamic",label:"粉丝动态",style:{width:464}}),(0,i.jsxs)(c.Form.Select,{field:"uploader",label:"上传插件",style:{width:250},showClear:!0,children:[(0,i.jsx)(c.Form.Select.Option,{value:"bili_web",children:"bili_web"}),(0,i.jsx)(c.Form.Select.Option,{value:"biliup-rs",children:"biliup-rs"}),(0,i.jsx)(c.Form.Select.Option,{value:"Noop",children:"Noop"})]}),(0,i.jsx)(w,{field:"no_reprint",label:"自制声明"}),(0,i.jsx)(c.Form.Switch,{field:"open_elec",label:"开启充电面板"}),(0,i.jsx)(c.OF,{field:"credits",children:e=>{let{add:t,arrayFields:r}=e;return(0,i.jsxs)(c.Form.Section,{text:"简介@替换",children:[(0,i.jsxs)("div",{className:"semi-form-field-extra",style:{fontSize:"14px"},children:["如需在简介中@别人，请使用此项。示例：",(0,i.jsx)("br",{}),"简介：","{","streamer","}","主播直播间地址：","{","url","}"," 【@credit】",(0,i.jsx)("br",{}),'其中的"@credits"会依次替换为下面输入的@']}),(0,i.jsx)(c.zx,{icon:(0,i.jsx)(l.Z,{}),onClick:t,theme:"light",children:"添加行"}),r.map((e,t)=>{let{field:r,key:n,remove:l}=e;return(0,i.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,i.jsxs)(c.BZ,{children:[(0,i.jsx)(f,{field:"".concat(r,".username"),label:"需要@的用户名",placeholder:"username"}),(0,i.jsx)(f,{field:"".concat(r,".uid"),label:"需要@的uid",placeholder:"uid"})]}),(0,i.jsx)(c.zx,{type:"danger",theme:"borderless",icon:(0,i.jsx)(a.Z,{}),onClick:l,style:{margin:12}})]},n)})]})}})]}),[M,R]=(0,n.useState)(!1),{biliUsers:F}=(0,u.Bf)(),P=null==F?void 0:F.map(e=>({value:e.value,label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.qE,{size:"extra-small",src:e.face}),(0,i.jsx)("span",{style:{marginLeft:8},children:e.name})]})}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h,{text:"基本信息",children:[(0,i.jsx)(f,{rules:[{required:!0}],field:"template_name",label:"模板名称",style:{width:464}}),(0,i.jsx)(c.Form.Select,{rules:[{required:!0}],field:"user_cookie",label:{text:"投稿账号"},style:{width:176},optionList:P})]}),(0,i.jsxs)(h,{text:"基本设置",children:[(0,i.jsx)(f,{field:"title",label:"视频标题",style:{width:464},placeholder:"稿件标题"}),(0,i.jsxs)(b,{field:"copyright",label:"类型",direction:"vertical",children:[(0,i.jsx)("div",{onClick:()=>r.setValue("source",""),children:(0,i.jsx)(v,{value:1,children:"自制"})}),(0,i.jsxs)(v,{value:2,style:{alignItems:"center",flexShrink:0},children:[(0,i.jsx)("span",{style:{flexShrink:0},children:"转载"}),(0,i.jsx)(f,{field:"source",onClick:()=>r.setValue("copyright",2),placeholder:"转载视频请注明来源（例：转自http://www.xx.com/yy）注明来源会更快地通过审核哦",noLabel:!0,fieldStyle:{padding:0,marginLeft:24,width:560}})]})]}),(0,i.jsx)(C,{field:"tid",label:"分区",style:{width:272},treeData:O,placeholder:"投稿分区",dropdownStyle:{maxWidth:670},rules:[{required:!0}]}),(0,i.jsx)(E,{max:12,maxLength:20,field:"tags",label:"标签",allowDuplicates:!1,placeholder:"输入标签，Enter 确定",onChange:e=>console.log(e),style:{width:560},rules:[{required:!0,message:"Tag不能为空"}],onExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"标签数量不能超过12个",duration:3})},onInputExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"单个标签字数不能超过20",duration:3})}}),(0,i.jsx)(f,{field:"cover_path",label:"视频封面",style:{width:464},placeholder:"/cover/up.jpg"}),(0,i.jsx)(_,{style:{maxWidth:560},field:"description",label:"简介",placeholder:"填写更全面的相关信息，让更多的人能找到你的视频吧",autosize:!0,maxCount:2e3,showClear:!0}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"var(--semi-color-tertiary)"},children:[(0,i.jsx)(w,{field:"isDtime",label:{text:"定时发布"},checkedText:"｜",uncheckedText:"〇"}),(0,i.jsx)("span",{style:{paddingLeft:12,fontSize:12},children:"(当前+2小时 ≤ 可选时间 ≤ 当前+15天，转载稿件撞车判定以过审发布时间为准)"})]}),d.isDtime?(0,i.jsx)(p,{field:"dtime",label:" ",type:"dateTime",fieldStyle:{paddingTop:0}}):null]}),(0,i.jsx)(h,{style:{paddingBottom:40},text:(0,i.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>{R(!M),r.scrollToField("isDtime")},children:["更多设置 ",M?(0,i.jsx)(s.Z,{style:{marginLeft:12}}):(0,i.jsx)(o.Z,{style:{marginLeft:12}})]}),children:(0,i.jsx)(c.zF,{isOpen:M,keepDOM:!0,children:Z})})]})}},24033:function(e,t,r){e.exports=r(50094)},33068:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var i=r(2265),n=r(30713),l=r(44796);let a=l.w6?e=>{e()}:i.startTransition,s=e=>{let[,t]=(0,i.useState)({}),r=(0,i.useRef)(!1),n=(0,i.useRef)(e),a=(0,i.useRef)({data:!1,error:!1,isValidating:!1}),s=(0,i.useCallback)(e=>{let i=!1,l=n.current;for(let t in e)l[t]!==e[t]&&(l[t]=e[t],a.current[t]&&(i=!0));i&&!r.current&&t({})},[]);return(0,l.LI)(()=>(r.current=!1,()=>{r.current=!0})),[n,a.current,s]},o=(0,l.xD)(n.ZP,()=>(e,t,r={})=>{let{mutate:o}=(0,n.kY)(),c=(0,i.useRef)(e),u=(0,i.useRef)(t),d=(0,i.useRef)(r),h=(0,i.useRef)(0),[f,p,x]=s({data:l.i_,error:l.i_,isMutating:!1}),m=f.current,w=(0,i.useCallback)(async(e,t)=>{var r,i;let[n,s]=(0,l.qC)(c.current);if(!u.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!n)throw Error("Can’t trigger the mutation: missing key.");let f=(0,l.PM)((0,l.PM)({populateCache:!1,throwOnError:!0},d.current),t),p=(0,l.u3)();h.current=p,x({isMutating:!0});try{let t=await o(n,u.current(s,{arg:e}),(0,l.PM)(f,{throwOnError:!0}));return h.current<=p&&(a(()=>x({data:t,isMutating:!1,error:void 0})),null==(r=f.onSuccess)||r.call(f,t,n,f)),t}catch(e){if(h.current<=p&&(a(()=>x({error:e,isMutating:!1})),null==(i=f.onError)||i.call(f,e,n,f),f.throwOnError))throw e}},[]),g=(0,i.useCallback)(()=>{h.current=(0,l.u3)(),x({data:l.i_,error:l.i_,isMutating:!1})},[]);return(0,l.LI)(()=>{c.current=e,u.current=t,d.current=r}),{trigger:w,reset:g,get data(){return p.data=!0,m.data},get error(){return p.error=!0,m.error},get isMutating(){return p.isMutating=!0,m.isMutating}}})}}]);