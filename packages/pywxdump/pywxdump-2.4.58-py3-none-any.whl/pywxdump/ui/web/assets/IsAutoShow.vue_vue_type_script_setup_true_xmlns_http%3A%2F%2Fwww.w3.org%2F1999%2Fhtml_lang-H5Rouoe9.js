import{d as R,e as o,j as $,o as n,c as u,m as H,a as e,b as a,w as S,u as _,p as y,v as f,h as V,k as c,E as J,q as L,r as M,s as g,x as O,t as Q}from"./index-fo74kDp0.js";import{h as W}from"./axios--FnjuHWf.js";const X={style:{"background-color":"#d2d2fa",height:"100vh",display:"flex","justify-content":"center","align-items":"center"}},Z={key:0},ee={key:1,style:{"background-color":"#fff",width:"90%","min-width":"800px",height:"80%","border-radius":"10px",padding:"20px",overflow:"auto"}},te=e("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{"font-size":"20px","font-weight":"bold"}},"选择要查看的微信")],-1),le={style:{"margin-top":"20px"}},oe={style:{"margin-top":"20px"}},ae={key:1},ie={style:{"background-color":"#fff",width:"80%","min-width":"800px",height:"70%","border-radius":"10px",padding:"20px",overflow:"auto"}},ne=e("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{"font-size":"20px","font-weight":"bold"}},"自定义-文件位置"),e("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}})],-1),se={style:{"margin-top":"20px"}},ue={key:0},de={key:1},re={key:2},ce=e("label",null,"MicroMsg.db 路径: ",-1),pe=e("br",null,null,-1),ve={key:3},he=e("label",null,"MSG.db 路径: ",-1),me=e("br",null,null,-1),_e={key:4},ye=e("label",null,"MediaMSG.db 路径: ",-1),fe=e("br",null,null,-1),ge=e("label",null,"微信文件夹路径: ",-1),xe=e("br",null,null,-1),be=e("label",null,"微信原始id: ",-1),we=e("br",null,null,-1),ke={key:5},Ve=e("label",null,"密钥key(可空): ",-1),Me=e("br",null,null,-1),Ue={key:2},Ce={key:3,style:{display:"flex","justify-content":"space-between"}},Ee={style:{width:"200px",height:"150px","background-color":"#fff",display:"flex","flex-direction":"column","align-items":"center","border-radius":"10px","margin-right":"20px"}},je=e("div",{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},[e("div",null,"使用上次数据")],-1),Se={style:{width:"200px",height:"150px","background-color":"#fff",display:"flex","flex-direction":"column","align-items":"center","border-radius":"10px","margin-right":"20px"}},Te=e("div",{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},[e("div",null,"自动解密已登录微信")],-1),Be={style:{width:"200px",height:"150px","background-color":"#fff",display:"flex","flex-direction":"column","align-items":"center","border-radius":"10px"}},De=e("div",{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},[e("div",null,"自定义文件位置")],-1),Ae=R({__name:"IsAutoShow",emits:["isAutoShow"],setup(Ge,{emit:A}){const r=o(0),U=o(500),K=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],q=o(new Date().getTime()),T=()=>{E.value||(q.value=new Date().getTime(),!(r.value>=99)&&(r.value>=80&&(U.value=U.value+50),r.value=r.value+1,setTimeout(T,U.value)))},z=o(!1),x=o([]),B=o(""),C=o(!1);o("");const E=o(!1),d=o("false"),b=o(""),w=o(""),k=o(""),p=o(""),v=o(""),h=o(""),s=o(""),P=A,Y=async()=>{try{x.value=await W.post("/api/wxinfo"),x.value.length===1&&(D(x.value[0]),B.value=" (检测到只有一个微信，将在5秒后自动选择) ",setTimeout(G,5e3))}catch(i){return console.error("Error fetching data:",i),[]}},D=async i=>{b.value="",w.value="",k.value="",p.value=i.filePath,v.value=i.key,h.value=i.wxid},G=()=>{p.value===""&&v.value===""&&h.value===""||C.value||(console.log(p.value,v.value,h.value),C.value=!0,j(),T())},j=async()=>{try{let i={msg_path:b.value,micro_path:w.value,media_path:k.value,wx_path:p.value,key:v.value,my_wxid:h.value,init_type:s.value};const t=await W.post("/api/init",i);z.value=t.is_init,t.is_init&&(r.value=100),P("isAutoShow",t.is_init)}catch(i){return r.value=0,E.value=!0,J.alert(i,"error",{confirmButtonText:"确认",callback:t=>{L({type:"error",message:`action: ${t}`})}}),[]}};return $(s,i=>{i==="auto"?Y():i==="custom"||i==="last"&&j()}),(i,t)=>{const F=M("el-progress"),N=M("el-button"),I=M("el-divider"),m=M("el-input");return n(),u("div",X,[s.value==="auto"?(n(),u("div",Z,[C.value&&!E.value?(n(),H(F,{key:0,type:"dashboard",percentage:r.value,color:K},null,8,["percentage"])):(n(),u("div",ee,[te,e("div",le,[a(_(O),{data:x.value,onCurrentChange:D,"highlight-current-row":"",style:{width:"100%"}},{default:S(()=>[a(_(g),{"min-width":30,prop:"pid",label:"进程id"}),a(_(g),{"min-width":40,prop:"version",label:"微信版本"}),a(_(g),{"min-width":40,prop:"account",label:"账号"}),a(_(g),{"min-width":40,prop:"name",label:"昵称"}),a(_(g),{"min-width":50,prop:"wxid",label:"微信原始id"})]),_:1},8,["data"])]),e("div",oe,[a(N,{style:{"margin-right":"10px","margin-top":"10px",width:"100%"},type:"success",onClick:G},{default:S(()=>[V("确定"+Q(B.value),1)]),_:1})])]))])):s.value==="custom"?(n(),u("div",ae,[e("div",ie,[ne,e("div",se,[y(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),value:"true"},null,512),[[f,d.value]]),V(" 使用 KEY          "),y(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),value:"false"},null,512),[[f,d.value]]),V(" 不使用 KEY "),d.value=="false"?(n(),u("div",ue," 说明：1、表示数据库已解密    2、若使用导出后的merge数据库，则db路径写这个即可 ")):c("",!0),d.value=="true"?(n(),u("div",de," 说明：自动根据key解密微信文件夹下的数据库 ")):c("",!0),a(I),d.value=="false"?(n(),u("div",re,[ce,a(m,{placeholder:"MicroMsg.db",modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=l=>w.value=l),style:{width:"80%"}},null,8,["modelValue"]),pe])):c("",!0),d.value=="false"?(n(),u("div",ve,[he,a(m,{placeholder:"MSG.db",modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=l=>b.value=l),style:{width:"80%"}},null,8,["modelValue"]),me])):c("",!0),d.value=="false"?(n(),u("div",_e,[ye,a(m,{placeholder:"MediaMSG.db",modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=l=>k.value=l),style:{width:"80%"}},null,8,["modelValue"]),fe])):c("",!0),ge,a(m,{placeholder:"C:\\***\\WeChat Files\\wxid_*******",modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=l=>p.value=l),style:{width:"80%"}},null,8,["modelValue"]),xe,be,a(m,{placeholder:"wxid_*******",modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=l=>h.value=l),style:{width:"80%"}},null,8,["modelValue"]),we,d.value=="true"?(n(),u("div",ke,[Ve,a(m,{placeholder:"密钥key (64位)",modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=l=>v.value=l),style:{width:"80%"}},null,8,["modelValue"]),Me])):c("",!0),a(N,{style:{"margin-top":"10px",width:"100%"},type:"success",onClick:j},{default:S(()=>[V("确定")]),_:1})])])])):s.value==="last"?(n(),u("div",Ue)):s.value===""?(n(),u("div",Ce,[e("label",Ee,[y(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=l=>s.value=l),value:"last"},null,512),[[f,s.value]]),je]),e("label",Se,[y(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=l=>s.value=l),value:"auto"},null,512),[[f,s.value]]),Te]),e("label",Be,[y(e("input",{type:"radio","onUpdate:modelValue":t[10]||(t[10]=l=>s.value=l),value:"custom"},null,512),[[f,s.value]]),De])])):c("",!0)])}}});export{Ae as _};
