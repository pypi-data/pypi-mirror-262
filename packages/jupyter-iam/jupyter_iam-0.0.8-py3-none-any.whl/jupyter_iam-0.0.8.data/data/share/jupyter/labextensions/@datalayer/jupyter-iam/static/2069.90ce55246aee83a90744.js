"use strict";(self.webpackChunk_datalayer_jupyter_iam=self.webpackChunk_datalayer_jupyter_iam||[]).push([[2069],{92069:(e,a,s)=>{s.r(a),s.d(a,{ANONYMOUS_TOKEN:()=>k.q$,ANONYMOUS_USER:()=>k.aK,BackdropProvider:()=>p,DEFAULT_AVATAR_URL:()=>r.jz,DatalayerIdentity:()=>o.q,IJupyterIAM:()=>C.IJupyterIAM,IdentityView:()=>r.tO,JoinConfirm:()=>F,JoinForm:()=>q,JoinWelcome:()=>P,LoginForm:()=>_,Logout:()=>W,NewPasswordConfirm:()=>J,NewPasswordForm:()=>B,NewPasswordWelcome:()=>G,PermissionsView:()=>r.i6,UserManager:()=>n.w,dbToUser:()=>k.b0,getIAMServerUrl:()=>i.v6,jpIAMStore:()=>b.Ck,loadIAMConfig:()=>i.vD,setIAMServerUrl:()=>i.NG,toColor:()=>r.p9,useApi:()=>t.h,useBackdrop:()=>v,useNavigate:()=>x.s,useStore:()=>b.oR,useToast:()=>y});var r=s(6892),o=s(4833),n=s(90299),i=s(80107),t=s(57306),d=s(74512),l=s(66029),c=s(96560);const h=s.n(c)().div`
  position: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.3);
  height: 100vh;
  width: 100vw;
  right: 0;
  top: 0;
  z-index: 1000000000;
`,u=function({open:e,element:a}){return e?(0,d.jsx)(h,{children:a}):(0,d.jsx)(d.Fragment,{})},m=(0,l.createContext)({openBackdrop:e=>{},closeBackdrop:()=>{}}),p=({children:e})=>{const[a,s]=(0,l.useState)(!1),[r,o]=(0,l.useState)();return(0,d.jsxs)(m.Provider,{value:{openBackdrop:e=>{o(e),s(!0)},closeBackdrop:()=>{o(void 0),s(!1)}},children:[(0,d.jsx)(u,{open:a,element:r}),e]})};function v(){return(0,l.useContext)(m)}var x=s(20948),j=s(96129),g=s(67048),w=s(19342);const f=w.toast.POSITION.TOP_CENTER,{insideJupyterLab:Z}=(0,g.loadJupyterConfig)({}),y=()=>({enqueueToast:(e,a)=>{switch(a.variant){case"info":Z?j.Notification.info(e,{autoClose:5e3}):w.toast.info(e,{position:f});break;case"success":Z?j.Notification.success(e,{autoClose:5e3}):w.toast.success(e,{position:f});break;case"warning":Z?j.Notification.warning(e,{autoClose:5e3}):w.toast.warning(e,{position:f});break;case"error":Z?j.Notification.error(e,{autoClose:5e3}):w.toast.error(e,{position:f})}}});var C=s(88660),k=s(53761),b=s(83513),N=s(12221),L=s(54915),R=s(32126),S=s(45455),T=s(97478),A=s(28977);const Y=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,E=(e,a)=>e.length>=a,F=e=>{const{loginRoute:a,joinWelcomeRoute:s}=e,r=(0,x.s)(),{apiRequest:o}=(0,t.h)(),{enqueueToast:n}=y(),[c,h]=(0,l.useState)(!1),[u,m]=(0,l.useState)({handle:void 0,token:void 0}),[p,v]=(0,l.useState)({handle:void 0,token:void 0});return(0,l.useEffect)((()=>{v({...p,handle:void 0===u.handle?void 0:E(u.handle,1)?"success":"error",token:void 0===u.token?void 0:E(u.token,1)?"success":"error"})}),[u]),(0,d.jsxs)(N.X,{containerWidth:"medium",padding:"normal",sx:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,d.jsx)(N.X.Header,{children:(0,d.jsx)(L.Z,{children:"Activate Datalayer"})}),(0,d.jsx)(N.X.Content,{children:(0,d.jsx)(R.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,d.jsxs)(R.Z,{sx:{label:{marginTop:2}},children:[(0,d.jsx)(R.Z,{children:(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your handle"}),(0,d.jsx)(T.Z,{autoFocus:!0,value:u.handle,onChange:e=>{m((a=>({...a,handle:e.target.value})))}}),"error"===p.handle&&(0,d.jsx)(S.Z.Validation,{variant:p.handle,children:"Your handle must have more than 1 character."})]})}),(0,d.jsx)(R.Z,{children:(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your activation code (check your mail)"}),(0,d.jsx)(T.Z,{type:"email",value:u.token,onChange:e=>{m((a=>({...a,token:e.target.value})))}}),"error"===p.token&&(0,d.jsx)(S.Z.Validation,{variant:p.token,children:"Your activation code is too small."})]})}),(0,d.jsx)(R.Z,{sx:{display:"flex"},mt:2,children:(0,d.jsx)(A.r,{variant:"primary",type:"submit",disabled:c||"success"!==p.handle||"success"!==p.token,onClick:async()=>{c||(h(!0),o({url:`${(0,i.v6)()}/api/iam/v1/join/confirm/${u.handle}/${u.token}`,method:"GET"}).then((e=>{e.success?r(s):n(e.message,{variant:"error"})})).catch((e=>{console.error(e),n("Application Error.",{variant:"error"}),r(a)})))},children:c?"Activating...":"Activate"})})]})})})]})},q=e=>{const{joinConfirmRoute:a}=e,{apiRequest:s}=(0,t.h)(),{enqueueToast:r}=y(),o=(0,x.s)(),[n,c]=(0,l.useState)(!1),[h,u]=(0,l.useState)({handle:void 0,email:void 0,firstName:void 0,lastName:void 0,password:void 0,passwordConfirm:void 0}),[m,p]=(0,l.useState)({handle:void 0,email:void 0,firstName:void 0,lastName:void 0,password:void 0,passwordConfirm:void 0});return(0,l.useEffect)((()=>{var e;p({...m,handle:void 0===h.handle?void 0:E(h.handle,1)?"success":"error",email:void 0===h.email?void 0:(e=h.email,Y.test(e)?"success":"error"),firstName:void 0===h.firstName?void 0:E(h.firstName,1)?"success":"error",lastName:void 0===h.lastName?void 0:E(h.lastName,1)?"success":"error",password:void 0===h.password?void 0:E(h.password,5)?"success":"error",passwordConfirm:void 0===h.passwordConfirm?void 0:E(h.passwordConfirm,5)?"success":"error"})}),[h]),(0,d.jsxs)(N.X,{containerWidth:"medium",padding:"normal",sx:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,d.jsx)(N.X.Header,{children:(0,d.jsx)(L.Z,{children:"Join Datalayer"})}),(0,d.jsx)(N.X.Content,{children:(0,d.jsx)(R.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,d.jsxs)(R.Z,{sx:{label:{marginTop:2}},children:[(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your handle"}),(0,d.jsx)(T.Z,{autoFocus:!0,value:h.handle,onChange:e=>{u((a=>({...a,handle:e.target.value})))}}),"error"===m.handle&&(0,d.jsx)(S.Z.Validation,{variant:m.handle,children:"Your handle must have more than 1 character."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your email"}),(0,d.jsx)(T.Z,{type:"email",value:h.email,onChange:e=>{u((a=>({...a,email:e.target.value})))}}),"error"===m.email&&(0,d.jsx)(S.Z.Validation,{variant:m.email,children:"Your email is not valid."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your first name"}),(0,d.jsx)(T.Z,{value:h.firstName,onChange:e=>{u((a=>({...a,firstName:e.target.value})))}}),"error"===m.firstName&&(0,d.jsx)(S.Z.Validation,{variant:m.firstName,children:"Your first name must have more than 1 character."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your last name"}),(0,d.jsx)(T.Z,{value:h.lastName,onChange:e=>{u((a=>({...a,lastName:e.target.value})))}}),"error"===m.lastName&&(0,d.jsx)(S.Z.Validation,{variant:m.lastName,children:"Your last name must have more than 1 character."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your password"}),(0,d.jsx)(T.Z,{type:"password",value:h.password,onChange:e=>{u((a=>({...a,password:e.target.value})))}}),"error"===m.password&&(0,d.jsx)(S.Z.Validation,{variant:m.password,children:"Your password is not valid."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your password confirmation"}),(0,d.jsx)(T.Z,{type:"password",value:h.passwordConfirm,onChange:e=>{u((a=>({...a,passwordConfirm:e.target.value})))}}),"error"===m.passwordConfirm&&(0,d.jsx)(S.Z.Validation,{variant:m.passwordConfirm,children:"Your password confirmation is not valid."})]}),(0,d.jsx)(R.Z,{sx:{display:"flex"},mt:2,children:(0,d.jsx)(A.r,{variant:"primary",type:"submit",disabled:n||"success"!==m.handle||"success"!==m.email||"success"!==m.firstName||"success"!==m.lastName||"success"!==m.password||"success"!==m.passwordConfirm,onClick:async()=>{var e;n||((e=h).password===e.passwordConfirm||(r("Please make sure your passwords match.",{variant:"warning"}),0))&&(c(!0),s({url:`${(0,i.v6)()}/api/iam/v1/join/request/token`,method:"POST",body:{handle:h.handle,email:h.email,firstName:h.firstName,lastName:h.lastName,password:h.password,passwordConfirm:h.passwordConfirm}}).then((e=>{c(!1),e.success?(r(e.message,{variant:"success"}),o(a)):(r(e.message,{variant:"warning"}),e.errors.map((e=>r(e,{variant:"error"}))))})).catch((e=>{console.error(e),c(!1),r("Application Error.",{variant:"error"})})))},children:n?"Requesting...":"Request to join"})})]})})})]})},P=e=>{const{loginRoute:a}=e,{enqueueToast:s}=y(),r=(0,x.s)();return(0,l.useEffect)((()=>{s("Welcome to Datalayer - Log in with your username and password",{variant:"success"}),r(a)}),[]),(0,d.jsx)(d.Fragment,{})};var V=s(1865),I=s(5917),D=s(62005),U=s(19893),O=s(9851),X=s(86642),H=s(21780);const _=e=>{const{heading:a,homeRoute:s,joinRoute:r,passwordRoute:o,joinConfirmRoute:n}=e,{apiRequest:c}=(0,t.h)({loginRoute:s}),{clearAuth:h,setAuth:u,socialLogin:m,addSocialLogin:p}=(0,b.ZP)(),{enqueueToast:v}=y(),j=(0,x.s)(),[g,w]=(0,l.useState)(!1),[f,Z]=(0,l.useState)(0),[C,Y]=(0,l.useState)({handle:void 0,password:void 0}),[F,q]=(0,l.useState)({handle:void 0,password:void 0});(0,l.useEffect)((()=>{const e=(0,H.Dt)();e?(Z(1),M(e,h,u,j,s).catch((e=>{console.error("Failed to log in with token from cookie",e),v("Failed to check authentication",{variant:"error"})})).finally((()=>{Z(-1)}))):Z(-1)}),[]);const P=e=>{"Enter"===e.key&&O()},O=async()=>{g||""!==F.handle||""!==F.password||(w(!0),c({url:`${(0,i.v6)()}/api/iam/v1/login`,method:"POST",body:{handle:C.handle,password:C.password}}).then((e=>{if(w(!1),e.success){q({handle:"",password:""});const a=e.token,r=(0,k.b0)(e.user);u(r,a),j(s)}else q({handle:"",password:"Invalid credentials"}),console.warn(`Failed to log in: ${e.message}`,e.errors??"")})).catch((e=>{console.error(e),w(!1),v("Application Error.",{variant:"error"})})))};return(0,l.useEffect)((()=>{if(!m.github){const e=V.URLExt.join(V.PageConfig.getBaseUrl(),"jupyter_iam/oauth/callback"),a=document.cookie.match("\\b_xsrf=([^;]*)\\b"),s={provider:"github",callback_uri:e};a&&(s.nonce=a[1]),fetch(V.URLExt.join((0,i.v6)(),"api/iam/v1/oauth/login")+V.URLExt.objectToQueryString(s)).then((async e=>{if(e.ok){const a=await e.json();if(a.success)return void p("github",a.loginURL)}throw Error("Failed to get the GitHub login URL from Datalayer IAM.")})).catch((e=>{console.error("Failed to fetch the GitHub login URL.",e)}))}}),[m,p]),(0,l.useEffect)((()=>{q({...F,handle:void 0===C.handle?void 0:E(C.handle,1)?"":"Your handle may not be empty.",password:void 0===C.password?void 0:E(C.password,1)?"":"Your password may not be empty."})}),[C]),(0,d.jsxs)(N.X,{containerWidth:"medium",padding:"normal",sx:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,d.jsx)(N.X.Header,{children:(0,d.jsx)(L.Z,{children:a||"Login to Datalayer"})}),(0,d.jsx)(N.X.Content,{children:f<0?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(R.Z,{display:"grid",gridTemplateColumns:"1fr 20px 1fr",children:[(0,d.jsxs)(R.Z,{sx:{label:{marginTop:2},paddingRight:"10%"},children:[(0,d.jsx)(R.Z,{mt:5,children:(0,d.jsxs)(S.Z,{required:!0,children:[(0,d.jsx)(S.Z.Label,{children:"Your handle"}),(0,d.jsx)(T.Z,{autoFocus:!0,placeholder:"Your handle",value:C.handle,onChange:e=>{Y((a=>({...a,handle:e.target.value})))},onKeyDown:P}),F.handle&&(0,d.jsx)(S.Z.Validation,{variant:F.handle?"error":"success",children:F.handle})]})}),(0,d.jsx)(R.Z,{children:(0,d.jsxs)(S.Z,{required:!0,children:[(0,d.jsx)(S.Z.Label,{children:"Your password"}),(0,d.jsx)(T.Z,{placeholder:"Your password",type:"password",value:C.password,onChange:e=>{Y((a=>({...a,password:e.target.value})))},onKeyDown:P}),F.password&&(0,d.jsx)(S.Z.Validation,{variant:F.password?"error":"success",children:F.password})]})}),(0,d.jsxs)(R.Z,{mt:5,children:[(0,d.jsx)(A.r,{variant:"primary",disabled:g||""!==F.handle||""!==F.password,onClick:O,children:g?"Log in...":a?"Log in with Datalayer":"Log in"}),(0,d.jsx)(R.Z,{pt:6}),r&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(I.Z,{onClick:()=>{j(r)},children:"Don't have an account?"}),(0,d.jsx)(R.Z,{pt:3})]}),(0,d.jsx)(I.Z,{onClick:()=>{j(o)},children:"Forgot password?"}),r&&n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(R.Z,{pt:3}),(0,d.jsx)(I.Z,{onClick:()=>{j(n)},children:"Activate your account with a code"})]})]})]}),(0,d.jsx)(R.Z,{sx:{margin:"auto"},children:(0,d.jsx)(D.Z,{children:"Or"})}),(0,d.jsxs)(R.Z,{display:"flex",flexDirection:"column",sx:{margin:"auto"},children:[m.github&&(0,d.jsxs)(A.r,{variant:"primary",href:m.github,as:"a",style:{margin:"10px 0"},children:[(0,d.jsx)("i",{className:"fa fa-solid fa-github",style:{marginRight:"1rem"}}),"Log in with GitHub"]}),(0,d.jsx)($,{homeRoute:s,style:{margin:"10px 0"}})]})]})}):f?(0,d.jsxs)(R.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"40px"},children:[(0,d.jsx)(U.Z,{}),(0,d.jsx)(D.Z,{children:"Checking authentication..."})]}):null})]})};function $(e){const{homeRoute:a,style:s}=e,r=(0,x.s)(),{clearAuth:o,setAuth:n}=(0,b.ZP)(),{enqueueToast:i}=y(),[t,c]=(0,l.useState)(!1),[h,u]=(0,l.useState)(""),m=(0,l.useCallback)((()=>{M(h,o,n,r,a).catch((e=>{console.error("Failed to log in with token",e),i("Failed to log in with token",{variant:"error"})})).finally((()=>{c(!1)}))}),[h]),p=(0,l.useCallback)((e=>{u(e.target.value)}),[u]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(A.r,{style:s,onClick:()=>{c(!0)},children:"Log in with token"}),t&&(0,d.jsx)(X.V,{title:"Enter the token",onClose:()=>{c(!1)},footerButtons:[{buttonType:"default",onClick:()=>{c(!1)},content:"Cancel"},{buttonType:"primary",onClick:m,content:"Log in",autoFocus:!0}],children:(0,d.jsx)(R.Z,{as:"form",children:(0,d.jsxs)(S.Z,{required:!0,children:[(0,d.jsx)(S.Z.Label,{children:"Authentication token"}),(0,d.jsx)(O.ZP,{block:!0,value:h,onInput:p})]})})})]})}async function M(e,a,s,r,o){const n=await fetch(`${(0,i.v6)()}/api/iam/v1/login`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!n.ok)throw 401===n.status&&(console.log("Jupyter IAM has received a 401 return code."),a()),new Error(n.status.toString());{const{user:e,token:a}=await n.json(),i=(0,k.b0)(e);if(!i||!a)throw new Error("Invalid token.");s(i,a),r(o)}}const W=e=>{const{homeRoute:a}=e,{clearAuth:s}=(0,b.ZP)(),r=(0,x.s)();return(0,l.useEffect)((()=>{s(),r(a)}),[]),(0,d.jsx)(d.Fragment,{})},J=e=>{const{loginRoute:a,passwordWelcomeRoute:s}=e,{apiRequest:r}=(0,t.h)(),o=(0,x.s)(),{enqueueToast:n}=y(),[c,h]=(0,l.useState)(!1),[u,m]=(0,l.useState)({handle:void 0,token:void 0}),[p,v]=(0,l.useState)({handle:void 0,token:void 0});return(0,l.useEffect)((()=>{v({...p,handle:void 0===u.handle?void 0:E(u.handle,1)?"success":"error",token:void 0===u.token?void 0:E(u.token,1)?"success":"error"})}),[u]),(0,d.jsxs)(N.X,{containerWidth:"medium",padding:"normal",sx:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,d.jsx)(N.X.Header,{children:(0,d.jsx)(L.Z,{children:"Confirm your password"})}),(0,d.jsx)(N.X.Content,{children:(0,d.jsx)(R.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,d.jsxs)(R.Z,{sx:{label:{marginTop:2}},children:[(0,d.jsx)(R.Z,{children:(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your handle"}),(0,d.jsx)(T.Z,{autoFocus:!0,value:u.handle,onChange:e=>{m((a=>({...a,handle:e.target.value})))}}),"error"===p.handle&&(0,d.jsx)(S.Z.Validation,{variant:p.handle,children:"Your handle must have more than 1 character."})]})}),(0,d.jsx)(R.Z,{children:(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your activation code (check your mail)"}),(0,d.jsx)(T.Z,{type:"email",value:u.token,onChange:e=>{m((a=>({...a,token:e.target.value})))}}),"error"===p.token&&(0,d.jsx)(S.Z.Validation,{variant:p.token,children:"Your activation token is too small."})]})}),(0,d.jsx)(R.Z,{sx:{display:"flex"},mt:2,children:(0,d.jsx)(A.r,{variant:"primary",type:"submit",disabled:c||"success"!==p.handle||"success"!==p.token,onClick:async()=>{c||(h(!0),r({url:`${(0,i.v6)()}/api/iam/v1/password/confirm/${u.handle}/${u.token}`,method:"GET"}).then((e=>{e.success?o(s):(n(e.message,{variant:"error"}),o(a))})).catch((e=>{console.error(e),n("Application Error.",{variant:"error"}),o(a)})))},children:c?"Activating...":"Activate"})})]})})})]})},B=e=>{const{passwordConfirmRoute:a}=e,{apiRequest:s}=(0,t.h)(),r=(0,x.s)(),{enqueueToast:o}=y(),[n,c]=(0,l.useState)(!1),[h,u]=(0,l.useState)({handle:void 0,password:void 0,passwordConfirm:void 0}),[m,p]=(0,l.useState)({handle:void 0,password:void 0,passwordConfirm:void 0});return(0,l.useEffect)((()=>{p({...m,handle:void 0===h.password?void 0:E(h.password,1)?"success":"error",password:void 0===h.password?void 0:E(h.password,5)?"success":"error",passwordConfirm:void 0===h.passwordConfirm?void 0:E(h.passwordConfirm,5)?"success":"error"})}),[h]),(0,d.jsxs)(N.X,{containerWidth:"medium",padding:"normal",sx:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,d.jsx)(N.X.Header,{children:(0,d.jsx)(L.Z,{children:"Change your password"})}),(0,d.jsx)(N.X.Content,{children:(0,d.jsxs)(R.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,d.jsxs)(R.Z,{sx:{label:{marginTop:2}},children:[(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your handle"}),(0,d.jsx)(T.Z,{autoFocus:!0,value:h.handle,onChange:e=>{u((a=>({...a,handle:e.target.value})))}}),"error"===m.handle&&(0,d.jsx)(S.Z.Validation,{variant:m.handle,children:"Your handle must have more than 1 character."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your new pasword"}),(0,d.jsx)(T.Z,{type:"password",value:h.password,onChange:e=>{u((a=>({...a,password:e.target.value})))}}),"error"===m.password&&(0,d.jsx)(S.Z.Validation,{variant:m.password,children:"Your new password is not valid."})]}),(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(S.Z.Label,{children:"Your new password confirmation"}),(0,d.jsx)(T.Z,{type:"password",value:h.passwordConfirm,onChange:e=>{u((a=>({...a,passwordConfirm:e.target.value})))}}),"error"===m.passwordConfirm&&(0,d.jsx)(S.Z.Validation,{variant:m.passwordConfirm,children:"Your password confirmation is not valid."})]})]}),(0,d.jsx)(R.Z,{sx:{display:"flex"},mt:2,children:(0,d.jsx)(A.r,{variant:"primary",type:"submit",disabled:n||"success"!==m.handle||"success"!==m.password||"success"!==m.passwordConfirm,onClick:()=>{n||(h.password===h.passwordConfirm||(o("Please make sure your passwords match.",{variant:"warning"}),0))&&(c(!0),s({url:`${(0,i.v6)()}/api/iam/v1/password/token`,method:"POST",body:{handle:h.handle,password:h.password,passwordConfirm:h.passwordConfirm}}).then((e=>{c(!1),e.success?(o(e.message,{variant:"success"}),r(a)):(o(e.message,{variant:"error"}),e.errors.map((e=>o(e,{variant:"error"}))))})).catch((e=>{console.error(e),c(!1),o("Application Error.",{variant:"error"})})))},children:n?"Sending mail to change password...":"Request to change password"})})]})})]})},G=e=>{const{loginRoute:a}=e,{enqueueToast:s}=y(),r=(0,x.s)();return(0,l.useEffect)((()=>{r(a),s("Welcome back to Datalayer - Login with your username and new password",{variant:"success"})}),[]),(0,d.jsx)(d.Fragment,{})}}}]);